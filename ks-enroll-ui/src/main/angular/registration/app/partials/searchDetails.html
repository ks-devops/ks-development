
<div class="kscr-SearchDetails">
    <!-- Search Details Header - Back to Results Link -->
    <div class="kscr-SearchDetails-top">
        <a id="returnToSearch" ui-sref="root.search.results({ searchCriteria: searchCriteria })"><span>&lt;&lt;</span> Return to Search Results</a>
    </div>

    <!-- Search Details Content -->
    <div class="kscr-SearchDetails-container">
        <div class="kscr-SearchDetails-header util-Grid util-Grid--center">
            <span class="kscr-SearchDetails-courseCode">{{course.courseOfferingCode}}</span>
            <span class="kscr-SearchDetails-courseTitle util-Grid-cell">{{course.courseOfferingLongName}}</span>
            <span class="kscr-SearchDetails-credits">{{course.creditOptions | creditRangeFormatter}}</span>
        </div>

        <div id="courseDescription" class="kscr-SearchDetails-description">{{course.courseOfferingDesc}}</div>

        <!-- Cross-listed courses -->
        <div class="kscr-SearchDetails-crosslists" ng-if="course.crossListedCourses.length > 0">
            <i class="kscr-SearchDetails-crosslists-icon">CR</i>
            <span class="kscr-SearchDetails-label">Crosslisted as</span>
            <ul>
                <li ng-repeat="crosslist in course.crossListedCourses">{{crosslist.courseOfferingCode}}</li>
            </ul>
        </div>

        <!-- Prerequisites -->
        <div class="kscr-SearchDetails-prerequisites" ng-if="course.prerequisites.length > 0">
            <span class="kscr-SearchDetails-label">Prerequisites:</span>
            <ul>
                <li ng-repeat="prerequisite in course.prerequisites">{{prerequisite}}</li>
            </ul>
        </div>

        <!-- Grading methods -->
        <div class="kscr-SearchDetails-grading">
            <span class="kscr-SearchDetails-label">Grading Methods:</span>
            <ul class="kscr-SearchDetails-grading-methods">
                <li class="kscr-SearchDetails-grading-method" ng-repeat="(key, label) in course.gradingOptions">{{label}}</li>
            </ul>
        </div>

        <!-- Selected Activity Offerings Area -->
        <div class="kscr-SearchDetails-actionsContainer util-Grid util-Grid--center">
            <!-- Selected Messages -->
            <div class="kscr-SearchDetails-selection kscr-SearchDetails-selection--empty util-Grid-cell" ng-if="!selectedRegGroup && !hasSelectedAOs()">
                <span class="kscr-SearchDetails-label">No Activities Selected</span>
            </div>
            <div class="kscr-SearchDetails-selection kscr-SearchDetails-selection--selected util-Grid-cell" ng-if="!selectedRegGroup && hasSelectedAOs()"
                 ng-class="{'kscr-SearchDetails-selection--complete' : selectedRegGroup }">
                <div class="kscr-SearchDetails-label" ng-if="!selectedRegGroup">{{selectedAOs.length}} of {{course.activityOfferingTypes.length}} selected</div>
                <div class="kscr-SearchDetails-label" ng-if="selectedRegGroup">Section {{selectedRegGroupCode}} Selected</div>
                <a ng-click="clearSelectedAOs()"><ng-pluralize count="selectedAOs.length" when="{'1': 'Clear Selection', 'other': 'Clear Selections'}"></ng-pluralize></a>
            </div>

            <!-- Actions -->
            <div class="kscr-SearchDetails-actions">
                <div class="kscr-SearchDetails-button">
                    <button id="search_details_add_to_cart" name="submit" class="kscr-Button" ng-disabled="!selectedRegGroup">Add to Cart</button>
                </div>
                <!-- TODO: The success/Failure message needs to be put in here -->
            </div>
        </div>

        <!-- Activity Offering Tables -->
        <div class="kscr-SearchDetails-activityOfferingGroups">
            <div class="kscr-SearchDetails-activityOfferingGroup" ng-repeat="aoType in course.activityOfferingTypes">
                <div class="kscr-SearchDetails-label">
                    {{aoType.activityOfferingTypeName}}<ng-pluralize count="aoType.activityOfferings.length" when="{'1' : '', 'other': 's'}">
                    </ng-pluralize> ({{aoType.activityOfferings.length}})
                    <!-- span ng-if="isAOTypeSelected(aoType)">(Selected)</span>
                    <span ng-if="!isAOTypeSelected(aoType) && hasSelectedAOs()">
                        (1 of {{aoType.activityOfferings.length}} eligible)
                        <a ng-click="showAll = !showAll" ng-show="aoType.activityOfferings.length > 1">
                            <span ng-if="!showAll">Show All</span>
                            <span ng-if="showAll">Hide ineligible</span>
                        </a>
                    </span-->
                </div>
               <div class="kscr-SearchDetails-activityOfferings">
                    <table id="search_results_table" class="kscr-Search-results-table">
                        <thead class="kscr-Search-results-table-head">
                        <tr>
                            <th class="kscr-Search-results-header">
                                <span>Days</span>
                                <i class="glyphicon glyphicon-sort kscr-Search-results-sortIcon" ng-click="$parent.predicate = '{{searchColumn.field}}'; $parent.reverse = !$parent.reverse"></i>
                            </th>
                            <th class="kscr-Search-results-header">
                                <span>Time</span>
                                <i class="glyphicon glyphicon-sort kscr-Search-results-sortIcon" ng-click="$parent.predicate = '{{searchColumn.field}}'; $parent.reverse = !$parent.reverse"></i>
                            </th>
                            <th class="kscr-Search-results-header">
                                <span>Instructor</span>
                                <i class="glyphicon glyphicon-sort kscr-Search-results-sortIcon" ng-click="$parent.predicate = '{{searchColumn.field}}'; $parent.reverse = !$parent.reverse"></i>
                            </th>
                            <th class="kscr-Search-results-header">
                                <span>Location</span>
                                <i class="glyphicon glyphicon-sort kscr-Search-results-sortIcon" ng-click="$parent.predicate = '{{searchColumn.field}}'; $parent.reverse = !$parent.reverse"></i>
                            </th>
                            <th class="kscr-Search-results-header">
                                <span>Seats Open</span>
                                <i class="glyphicon glyphicon-sort kscr-Search-results-sortIcon" ng-click="$parent.predicate = '{{searchColumn.field}}'; $parent.reverse = !$parent.reverse"></i>
                            </th>
                            <th class="kscr-Search-results-header">
                                <span>Select</span>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="kscr-Search-row" ng-repeat="ao in aoType.activityOfferings" ng-show="isAOSelected(ao) || (!isAOSelected(ao) && !isAOTypeSelected(ao.activityOfferingType)) || !hasSelectedAOs()">
                            <td class="kscr-Search-results-cell">
                                <div ng-repeat="scheduleComponent in ao.scheduleComponents" class="kscr-Card-scheduleComponent">
                                    {{scheduleComponent.days}}
                                </div>
                            </td>
                            <td class="kscr-Search-results-cell">
                                <div ng-repeat="scheduleComponent in ao.scheduleComponents" class="kscr-Card-scheduleComponent">
                                    {{scheduleComponent.displayTime}}
                                </div>
                            </td>
                            <td class="kscr-Search-results-cell">
                                <div ng-repeat="instructor in ao.instructors" class="kscr-Card-scheduleComponent">
                                    {{instructor.firstName}} {{instructor.lastName}}
                                </div>
                            </td>
                            <td class="kscr-Search-results-cell">
                                <div ng-repeat="scheduleComponent in ao.scheduleComponents" class="kscr-Card-scheduleComponent">
                                    {{scheduleComponent.buildingCode}}  {{scheduleComponent.roomCode}}
                                </div>
                            </td>
                            <td class="kscr-Search-results-cell">{{ao.seatsOpen}}/{{ao.seatsAvailable}}</td>
                            <td class="kscr-Search-results-cell"><input type="checkbox" ng-model="ao.selected" ng-click="toggleAO(ao.activityOfferingType, ao, course.activityOfferingTypes.length)"></td>
                        </tr>
                        </tbody>
                    </table>
                    <!-- div class="kscr-SearchDetails-activityOffering" ng-repeat="ao in aoType.activityOfferings | filter:aoFilter:showAll">
                        <div ng-click="toggleAO(aoType, ao)" ng-class="{'kscr-SearchDetails-activityOffering--selected' : isAOSelected(ao)}">
                            <strong>{{$index}} - Seats Available:</strong>
                            <span ng-class="{'kscr-SearchDetails-activityOffering-seats--noneAvailable' : ao.seatsAvailable === 0}"
                                  class="kscr-SearchDetails-activityOffering-seats">{{ao.seatsAvailable}}/{{ao.seatsOpen}}</span>
                        </div>
                    </div -->
                </div>
            </div>
        </div>
    </div>
</div>
